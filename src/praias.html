<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Praias Monitoradas | Caravana Ci√™ncia</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/praias.js"></script>
<style>
body { min-height: 100vh; display: flex; flex-direction: column; transition: background-color 0.5s ease; }
main { flex: 1 0 auto; }
footer { flex-shrink: 0; }

/* Cards */
.praia-card {
    position: relative;
    overflow: hidden;
    border-radius: 1rem;
    height: 220px;
    cursor: pointer;
    display: flex;
    transition: all 0.3s ease;
}
.card-background {
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    transition: transform 0.5s ease;
}
.card-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    padding: 1rem;
    color: #fff;
    background: linear-gradient(0deg, rgba(0,0,0,0.5) 0%, transparent 100%);
    transition: opacity 0.3s ease;
}
.card-info {
    position: absolute;
    top: 0;
    right: -100%;
    height: 100%;
    width: 50%;
    background: #fff;
    color: #333;
    padding: 0.5rem;
    box-shadow: -4px 0 10px rgba(0,0,0,0.1);
    transition: right 0.5s ease;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}
.praia-card:hover .card-info { right: 0; }
.praia-card:hover .card-background { transform: scale(1.1); }
.praia-card:hover .card-overlay { opacity: 0; }

.card-overlay h5 { margin: 0; font-weight: 600; }
.card-overlay .badge { font-size: 0.8rem; padding: 0.4em 0.6em; }

@media (max-width: 768px) {
    .praia-card { height: 180px; flex-direction: column; }
    .card-info { width: 100%; right: -100%; box-shadow: 0 -4px 10px rgba(0,0,0,0.1); }
}
.mini-card { border:1px solid #ddd; border-radius:0.5rem; padding:5px; height:120px; }
</style>
</head>
<body>

<nav class="navbar navbar-expand-lg navbar-dark shadow-sm" id="navbar" style="background-color:#0d6efd;">
  <div class="container">
    <a class="navbar-brand fw-bold" href="index.html">
      <img src="assets/logo.png" alt="Logo" style="height:40px;">
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link" href="index.html">In√≠cio</a></li>
        <li class="nav-item"><a class="nav-link active" href="praias.html">Praias</a></li>
      </ul>
    </div>
  </div>
</nav>

<main class="container py-4">
<h2 class="text-center fw-bold mb-4">Praias Monitoradas</h2>

<!-- Input e sele√ß√£o -->
<div class="input-group mb-4 shadow-sm">
    <span class="input-group-text">üíß</span>
    <input type="number" id="turbidezInput" class="form-control" placeholder="Digite o valor da turbidez (NTU)">
    <select id="praiaSelect" class="form-select">
        <option value="praia1">Indai√°</option>
        <option value="praia2">Cocanha</option>
        <option value="praia3">Martin de S√°</option>
    </select>
    <button class="btn btn-primary" onclick="atualizarTurbidez()">Aplicar</button>
</div>

<div id="praiasContainer" class="row g-4">

<!-- Praia 1 -->
<div class="col-md-4">
<div class="praia-card" id="praia1">
    <div class="card-background" style="background-image: url('assets/Indaia.jpg');"></div>
    <div class="card-overlay">
        <h5>Indai√°</h5>
        <span class="badge bg-secondary">Turbidez: N/A</span>
    </div>
    <div class="card-info">
        <div class="mini-card mb-2">
            <p>Informa√ß√µes r√°pidas da praia</p>
        </div>
        <div class="mini-card">
            <canvas id="graficoPraia1"></canvas>
        </div>
    </div>
</div>
</div>

<!-- Praia 2 -->
<div class="col-md-4">
<div class="praia-card" id="praia2">
    <div class="card-background" style="background-image: url('assets/Cocanha.jpg');"></div>
    <div class="card-overlay">
        <h5>Cocanha</h5>
        <span class="badge bg-secondary">Turbidez: N/A</span>
    </div>
    <div class="card-info">
        <div class="mini-card mb-2">
            <p>Informa√ß√µes r√°pidas da praia</p>
        </div>
        <div class="mini-card">
            <canvas id="graficoPraia2"></canvas>
        </div>
    </div>
</div>
</div>

<!-- Praia 3 -->
<div class="col-md-4">
<div class="praia-card" id="praia3">
    <div class="card-background" style="background-image: url('assets/Martin.jpg');"></div>
    <div class="card-overlay">
        <h5>Martin de S√°</h5>
        <span class="badge bg-secondary">Turbidez: N/A</span>
    </div>
    <div class="card-info">
        <div class="mini-card mb-2">
            <p>Informa√ß√µes r√°pidas da praia</p>
        </div>
        <div class="mini-card">
            <canvas id="graficoPraia3"></canvas>
        </div>
    </div>
</div>
</div>

</div>
</main>

<footer class="text-white text-center py-3 mt-5" id="footer" style="background-color:#0d6efd;">
<small>¬© 2025 Caravana Ci√™ncia. Todos os direitos reservados.</small>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
// Hover cards e mudan√ßa de cor do layout continuam iguais
function atualizarTurbidez(){
    const valor = parseInt(document.getElementById("turbidezInput").value);
    const praiaId = document.getElementById("praiaSelect").value;
    const card = document.getElementById(praiaId);
    const badge = card.querySelector(".badge");
    const navbar = document.getElementById("navbar");
    const footer = document.getElementById("footer");

    if(isNaN(valor)){
        badge.textContent = "Turbidez: N/A";
        badge.className = "badge bg-secondary";
        card.style.border="none";
        document.body.style.setProperty('background-color','#f8f9fa','important');
        navbar.style.setProperty('background-color','#0d6efd','important');
        footer.style.setProperty('background-color','#0d6efd','important');
        return;
    }

    badge.textContent = `Turbidez: ${valor} NTU`;

    let corBody = '#f8f9fa', corNav = '#0d6efd', corFooter = '#0d6efd';

    if(valor<=51){
        badge.className="badge bg-success";
        card.style.border="3px solid #28a745";
        corBody='#d0f0c0'; corNav='#28a745'; corFooter='#28a745';
    } else if(valor<=499){
        badge.className="badge bg-warning text-light";
        card.style.border="3px solid #ffc107";
        corBody='#fff3b0'; corNav='#ffc107'; corFooter='#ffc107';
    } else {
        badge.className="badge bg-danger";
        card.style.border="3px solid #dc3545";
        corBody='#ffb0b0'; corNav='#dc3545'; corFooter='#dc3545';
    }

    document.body.style.setProperty('background-color', corBody,'important');
    navbar.style.setProperty('background-color', corNav,'important');
    footer.style.setProperty('background-color', corFooter,'important');
}

// Hover cards
document.querySelectorAll('.praia-card').forEach(card=>{
    const badge = card.querySelector('.badge');
    const navbar = document.getElementById("navbar");
    const footer = document.getElementById("footer");

    card.addEventListener('mouseenter', ()=>{
        const valor = parseInt(badge.textContent.replace('Turbidez: ','').replace(' NTU',''));
        if(!isNaN(valor)){
            let corBody='#f8f9fa', corNav='#0d6efd', corFooter='#0d6efd';
            if(valor<=51){ corBody='#d0f0c0'; corNav='#28a745'; corFooter='#28a745'; }
            else if(valor<=499){ corBody='#fff3b0'; corNav='#ffc107'; corFooter='#ffc107'; }
            else { corBody='#ffb0b0'; corNav='#dc3545'; corFooter='#dc3545'; }

            document.body.style.setProperty('background-color', corBody,'important');
            navbar.style.setProperty('background-color', corNav,'important');
            footer.style.setProperty('background-color', corFooter,'important');
        }
    });

    card.addEventListener('mouseleave', ()=>{
        document.body.style.setProperty('background-color','#f8f9fa','important');
        navbar.style.setProperty('background-color','#0d6efd','important');
        footer.style.setProperty('background-color','#0d6efd','important');
    });
});

// Gr√°ficos Chart.js com cores din√¢micas por NTU
function criarGrafico(id, dados){
    const ctx = document.getElementById(id).getContext('2d');
    return new Chart(ctx, {
        type:'line',
        data:{
            labels:['M1','M2','M3','M4'],
            datasets:[{
                label:'Turbidez (NTU)',
                data:dados,
                fill:true,
                borderWidth:2,
                tension:0.4,
                pointBackgroundColor:'#fff',
                pointRadius:5,
                pointHoverRadius:7,
                segment: {
                    borderColor: ctx => {
                        const val = ctx.p1.parsed.y;
                        if(val <= 51) return '#28a745';
                        else if(val <= 499) return '#ffc107';
                        else return '#dc3545';
                    },
                    backgroundColor: ctx => {
                        const val = ctx.p1.parsed.y;
                        if(val <= 51) return 'rgba(40,167,69,0.2)';
                        else if(val <= 499) return 'rgba(255,193,7,0.2)';
                        else return 'rgba(220,53,69,0.2)';
                    }
                }
            }]
        },
        options:{
            responsive:true,
            maintainAspectRatio:false,
            scales:{
                x:{ grid:{ display:false }, ticks:{ color:'#333', font:{ size:12 } } },
                y:{ beginAtZero:true, grid:{ color:'#eee' }, ticks:{ color:'#333', font:{ size:12 } } }
            },
            plugins:{ legend:{ display:false }, tooltip:{ mode:'index', intersect:false } }
        }
    });
}

// Dados de exemplo
criarGrafico('graficoPraia1',[12,8,20,5]);
criarGrafico('graficoPraia2',[5,15,10,100]);
criarGrafico('graficoPraia3',[200,180,120,800]);
</script>
</body>
</html>